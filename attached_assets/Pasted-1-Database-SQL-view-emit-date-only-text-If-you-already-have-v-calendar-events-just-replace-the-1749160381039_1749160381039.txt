1â€‚Database / SQL view â€“ emit date-only text
(If you already have v_calendar_events, just replace the second SELECT.)

sql
Copy
Edit
-- prisma/migrations/20240606_installations_date_only.sql
CREATE OR REPLACE VIEW v_calendar_events AS
/* â”€â”€â”€â”€â”€ Surveys (already correct) â”€â”€â”€â”€â”€ */
SELECT
  id::text                       AS id,
  'survey'                       AS type,
  project_id,
  to_char(scheduled_date, 'YYYY-MM-DD') AS start_date,  -- TEXT
  status
FROM surveys

UNION ALL

/* â”€â”€â”€â”€â”€ Installations (fix) â”€â”€â”€â”€â”€ */
SELECT
  id::text,
  'installation',
  project_id,
  to_char(start_time, 'YYYY-MM-DD')      AS start_date,  -- TEXT, no time
  status
FROM installations;
to_char(start_time,'YYYY-MM-DD') converts whatever timestamp is in the row
into the literal string â€œ2025-06-11â€. No more hours, no timezone.

2â€‚Shared type & API route
ts
Copy
Edit
export interface CalendarEvent {
  id: string;
  type: 'survey' | 'installation';
  project_id: number;
  start_date: string;            // 'YYYY-MM-DD'
  status: 'Scheduled' | 'Completed' | 'Cancelled';
}
ts
Copy
Edit
// server/routes/calendar.ts  (unchanged except field name)
res.json(
  await prisma.$queryRaw<CalendarEvent[]>`
    SELECT *
    FROM v_calendar_events
    WHERE start_date BETWEEN ${start} AND ${end}
  `
);
3â€‚Front-end mapper (same as surveys)
tsx
Copy
Edit
const fcEvents = events.map((ev) => ({
  id: ev.id,
  title: ev.type === 'survey' ? 'Survey' : 'Installation',
  start: ev.start_date,   // <â”€ date string only
  allDay: true,           // <â”€ hide clock, one square
  backgroundColor: ev.type === 'survey' ? '#147aff' : '#ffc400',
  borderColor:     ev.type === 'survey' ? '#147aff' : '#ffc400',
}));
Nothing else changesâ€”your create-/update-Installation mutation already
invalidates ['calendar'], so new rows pop in immediately.

After applying
Table date	Calendar tile
Jun 11 2025	ğŸŸ¡ Installation (square on 11)
Jul 02 2025	ğŸŸ¡ Installation (square on 2)

Surveys remain blue and correct; installations are now fixed with the
identical date-only approach.